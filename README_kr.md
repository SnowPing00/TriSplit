TriSplit: A Specialized Compression Engine for Structured Chaos Data
TriSplit은 독립형 압축 엔진 프로젝트로, 엔트로피가 높아 무작위처럼 보이지만 실제로는 4종류의 2비트 심볼(00, 01, 10, 11)로 대부분 구성된 '구조적 혼돈(Structured Chaos)' 데이터 처리에 특화된 압축 엔진입니다.

1. 개요 (Overview)
전통적인 압축기는 '진정한 혼돈'에 가까운 데이터, 즉 통계적 패턴이나 반복이 거의 없는 데이터를 압축하는 데 어려움을 겪습니다. TriSplit은 이러한 데이터를 직접 압축하는 대신, 여러 단계에 걸쳐 데이터를 변환하고 분리하여 강력한 엔트로피 코더인 **rANS(ranged Asymmetric Numeral Systems)**가 최대의 효율을 발휘할 수 있는 형태로 재가공하는 전처리 및 분리 압축 파이프라인입니다.

2. 핵심 철학 (Core Philosophy)
"분리하여 정복하고, 각각에 최적화된 형태로 변환한다."
(Divide and Conquer, transforming each into an optimal form.)

TriSplit은 단일 알고리즘으로 모든 것을 해결하려 하지 않습니다. 대신, 데이터를 다음과 같은 특성을 가진 여러 개의 하위 스트림으로 분리합니다.

단순 이진 스트림

알파벳 크기가 극도로 작은 스트림

희소 비트 마스크 스트림

이렇게 분리되고 변환된 스트림들은 모두 최종적으로 rANS 엔코더에 의해 처리됩니다. 각 스트림은 rANS가 압축하기에 가장 이상적인 통계적 특성을 갖도록 설계되었습니다.

3. 전체 아키텍처 (Overall Architecture)
Input (Structured Chaos Data)
│
└───> [TriSplit: Separation Engine]
      │
      ├───> Part 1 (값 비트맵) ──────────> [rANS Encoder] ──> Output 1
      │
      └───> Part 2 (지도+데이터 스트림)
            │
            └───> [Preprocessor: Substitution]
                  │
                  ├───> Part 2a (보조 마스크) ──> [rANS Encoder] ──> Output 2a
                  │
                  └───> Transformed Part 2 ───> [rANS Encoder] ──> Output 2
4. 상세 동작 원리 (Detailed Operating Principle)
Phase 1: TriSplit - 분리 엔진
TriSplit 엔진은 원본 데이터를 단 한 번의 순회(Single Pass)로 3개의 논리적 스트림으로 분리합니다.

Part 1: 값 비트맵 (Value Bitmap)

역할: 원본 데이터의 10, 01 심볼 정보를 저장합니다.

생성 규칙: 원본에서 10을 만나면 0을, 01을 만나면 1을 이 스트림에 순서대로 추가합니다.

특징: 0과 1로만 구성된 단순 이진 스트림입니다.

Part 2: 지도+데이터 스트림 (Map+Data Stream)

역할: 00, 11 데이터의 원본 위치와 10, 01의 위치(지도)를 함께 보관합니다.

생성 규칙:

원본이 10 또는 01이면, 그 위치에 고정된 '지도 마커' 심볼 (예: 01)을 추가합니다.

원본이 00 또는 11이면, 해당 심볼을 그대로 추가합니다.

특징: 지도 마커, 00, 11 세 종류의 심볼로 구성됩니다.

Part 2a: 보조 마스크 스트림 (Auxiliary Mask Stream)

역할: Part 2의 데이터 심볼(00과 11)을 단일 심볼로 통합할 때, 원래 값을 복원하기 위한 정보를 저장합니다.

생성 규칙:

Part 2에 있는 00과 11의 빈도를 계산합니다.

더 낮은 빈도를 가진 심볼의 위치에는 1을, 더 높은 빈도를 가진 심볼의 위치에는 0을 순서대로 기록합니다.

특징: 1이 매우 드물게 나타나는 희소(sparse) 이진 스트림입니다.

Phase 2: 최종 압축 단계
분리된 모든 스트림은 최종적으로 rANS 엔코더에 의해 압축됩니다.

Part 1 압축: Part 1 (값 비트맵)을 rANS 엔코더로 직접 압축합니다.

Part 2a 압축: Part 2a (보조 마스크)는 1의 빈도가 매우 낮으므로 rANS 엔코더가 매우 높은 효율로 압축합니다.

Part 2 압축:

통합 치환: Part 2의 00과 11을 Part 2a 생성 규칙에 따라 단일 '자리표시자' 심볼(예: 더 빈번했던 00)로 모두 치환합니다.

rANS 적용: 이제 지도 마커와 자리표시자 단 두 종류의 심볼만으로 구성된 Part 2를 rANS 엔코더로 직접 압축합니다. 알파벳 크기가 2로 줄어들어 확률 모델이 극도로 단순해졌기 때문에, rANS는 이 데이터를 매우 높은 효율로 압축할 수 있습니다.

5. 종합 실행 예시 (Comprehensive Execution Example)
원본 데이터 (30 bits):

10 01 11 01 00 10 01 00 11 10 01 10 10 01 00
1. 분리 단계 (TriSplit Engine):

Part 1 (10 bits): 0110101001 → To rANS Encoder

Part 2 (30 bits): 01 01 11 01 00 01 01 00 11 01 01 01 01 01 00

Part 2a (5 bits): Part 2의 데이터(11, 00, 00, 11, 00) 중 빈도가 낮은 11의 위치를 1로 표시 → 10010 → To rANS Encoder

2. 압축 단계 (Part 2):

치환: Part 2의 11과 00을 모두 더 빈번했던 00으로 치환합니다.

변환된 Part 2: 01 01 00 01 00 01 01 00 00 01 01 01 01 01 00

이 스트림을 rANS 엔코더로 압축합니다. → To rANS Encoder

6. 복호화 과정 (Decompression Process)
압축된 Part 1, Part 2, Part 2a 및 메타데이터를 로드합니다.

rANS 디코더를 사용하여 세 개의 스트림을 모두 복원합니다.

복원된 Part 2를 순회하며 자리표시자(00)를 만날 때마다 Part 2a에서 비트를 하나씩 읽어 1이면 11로, 0이면 00으로 복원합니다.

치환이 완료된 Part 2를 다시 순회하며 지도 마커(01)를 만날 때마다 Part 1에서 비트를 하나씩 읽어 10 또는 01로 복원하고, 다른 심볼은 그대로 출력하여 최종 원본 데이터를 복구합니다.

7. 설계의 강점 (Strengths)
시너지 효과: TriSplit의 지능적인 전처리(분리 및 변환)와 rANS라는 강력한 범용 엔트로피 코더를 결합하여 단일 엔진으로는 불가능한 압축률을 달성합니다.

높은 특화성: '구조적 혼돈'이라는 특정 유형의 데이터에 대해 극도로 높은 성능을 발휘하도록 최적화되었습니다.

견고성: 데이터 복원에 필요한 모든 정보를 명시적인 스트림으로 관리하여 엣지 케이스 발생 가능성을 최소화하고 데이터 무결성을 보장합니다.